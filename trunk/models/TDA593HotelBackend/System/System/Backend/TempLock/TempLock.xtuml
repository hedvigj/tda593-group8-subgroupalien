-- BP 7.1 content: ModelClass syschar: 3 persistence-version: 7.1.5

INSERT INTO O_OBJ
	VALUES ("9f6bb5a3-482c-4083-b148-3f2d21230a4c",
	'TempLock',
	33,
	'TempLock',
	'',
	"f56566de-5321-4b5f-b659-95d5c01e1baa");
INSERT INTO O_TFR
	VALUES ("da1b9e44-eddd-4eda-82a5-bbfa38aaf1c7",
	"9f6bb5a3-482c-4083-b148-3f2d21230a4c",
	'addRoomConfiguration',
	'',
	"28114c36-aaba-4a92-b7c3-08f06e41c6a4",
	1,
	'// get singelton
select any rcm from instances of RoomManager;
if( empty rcm )
	create object instance rcm of RoomManager;
	return false;
end if;

select any rc related by rcm->RoomConfiguration[R10] 
where selected.name == param.roomConfigurationName;

if ( not_empty rc )
	select many rcats related by self->RoomConfigurationAmountTuple[R44]; 
	
	//assign rcat;
	for each rcat in rcats
		select one rc2 related by rcat->RoomConfiguration[R28];
		if(rc2.name == rc.name)
			// the rcat already exists so can not add another.
			return false;
		end if;
	end for;
	
	// Create new roomConfigurationAmountTuple
	create object instance rcat of RoomConfigurationAmountTuple;
	relate rc to rcat across R28;
	rcat.amount = param.amount; 
	relate rcat to self across R44;
	
	return true;
	
end if;

return false;

',
	1,
	'',
	"00000000-0000-0000-0000-000000000000");
INSERT INTO O_TPARM
	VALUES ("f9964cd0-b095-480d-88bc-423e910d6387",
	"da1b9e44-eddd-4eda-82a5-bbfa38aaf1c7",
	'amount',
	"5f77c811-d46b-4197-a574-4b3505e92410",
	0,
	'',
	"00000000-0000-0000-0000-000000000000",
	'');
INSERT INTO S_DT_PROXY
	VALUES ("5f77c811-d46b-4197-a574-4b3505e92410",
	"00000000-0000-0000-0000-000000000000",
	'integer',
	'',
	'',
	'../../../../Datatypes/Datatypes.xtuml');
INSERT INTO O_TPARM
	VALUES ("ddef6454-a6de-494a-bbe3-02025ad35b1e",
	"da1b9e44-eddd-4eda-82a5-bbfa38aaf1c7",
	'roomConfigurationName',
	"0cc44ce3-8f6d-4cee-9214-d23d12af9eaf",
	0,
	'',
	"f9964cd0-b095-480d-88bc-423e910d6387",
	'');
INSERT INTO S_DT_PROXY
	VALUES ("0cc44ce3-8f6d-4cee-9214-d23d12af9eaf",
	"00000000-0000-0000-0000-000000000000",
	'string',
	'',
	'',
	'../../../../Datatypes/Datatypes.xtuml');
INSERT INTO S_DT_PROXY
	VALUES ("28114c36-aaba-4a92-b7c3-08f06e41c6a4",
	"00000000-0000-0000-0000-000000000000",
	'boolean',
	'',
	'',
	'../../../../Datatypes/Datatypes.xtuml');
INSERT INTO O_TFR
	VALUES ("92fc69db-93da-4faa-a054-c1e495f87f6c",
	"9f6bb5a3-482c-4083-b148-3f2d21230a4c",
	'removeRoomConfiguration',
	'',
	"28114c36-aaba-4a92-b7c3-08f06e41c6a4",
	1,
	'// get singelton
select any rcm from instances of RoomManager;
if( empty rcm )
	create object instance rcm of RoomManager;
	return false;
end if;

select any rc related by rcm->RoomConfiguration[R10] 
where selected.name == param.roomConfigurationName;

if ( not_empty rc )
	select many rcats related by self->RoomConfigurationAmountTuple[R44]; 
	
	//assign rcat;
	for each rcat in rcats
		select one rc2 related by rcat->RoomConfiguration[R28];
		if(rc2.name == rc.name)
			// the rcat already exists so can not add another.
			unrelate rc from rcat across R28;
			unrelate rcat from self across R44;
			delete object instance rcat;
			return true;
		end if;
	end for;
end if;

return false;

',
	1,
	'',
	"da1b9e44-eddd-4eda-82a5-bbfa38aaf1c7");
INSERT INTO O_TPARM
	VALUES ("b957c8f3-3df3-4889-9840-dbd144bb2c77",
	"92fc69db-93da-4faa-a054-c1e495f87f6c",
	'roomConfigurationName',
	"0cc44ce3-8f6d-4cee-9214-d23d12af9eaf",
	0,
	'',
	"00000000-0000-0000-0000-000000000000",
	'');
INSERT INTO O_TFR
	VALUES ("e65916ed-3080-4be1-9502-75ccd5e4cec5",
	"9f6bb5a3-482c-4083-b148-3f2d21230a4c",
	'changeAmountOnRoomConfiguration',
	'',
	"28114c36-aaba-4a92-b7c3-08f06e41c6a4",
	1,
	'// get singelton
select any rcm from instances of RoomManager;
if( empty rcm )
	create object instance rcm of RoomManager;
	return false;
end if;

select any rc related by rcm->RoomConfiguration[R10] 
where selected.name == param.roomConfigurationName;

if ( not_empty rc )
	
	
	select many rcats related by self->RoomConfigurationAmountTuple[R44]; 
	
	//assign rcat;
	for each rcat in rcats
		select one rc2 related by rcat->RoomConfiguration[R28];
		if(rc2.name == rc.name)
			// the rcat already exists so can not add another.
			return false;
		end if;
	end for;
	
	// Change the amount parameter
	rcat.amount = param.amount; 
	
	return true;
	
end if;

return false;

',
	1,
	'',
	"92fc69db-93da-4faa-a054-c1e495f87f6c");
INSERT INTO O_TPARM
	VALUES ("47af24c1-b880-4bd8-a390-3a767d394475",
	"e65916ed-3080-4be1-9502-75ccd5e4cec5",
	'amount',
	"5f77c811-d46b-4197-a574-4b3505e92410",
	0,
	'',
	"00000000-0000-0000-0000-000000000000",
	'');
INSERT INTO O_TPARM
	VALUES ("1ab8e214-393f-4342-9434-88157d11df86",
	"e65916ed-3080-4be1-9502-75ccd5e4cec5",
	'roomConfigurationName',
	"0cc44ce3-8f6d-4cee-9214-d23d12af9eaf",
	0,
	'',
	"47af24c1-b880-4bd8-a390-3a767d394475",
	'');
INSERT INTO O_TFR
	VALUES ("7c3d18ef-f935-4ba0-a6ba-520e2419ae65",
	"9f6bb5a3-482c-4083-b148-3f2d21230a4c",
	'TempLock',
	'',
	"233e7f8d-a875-4812-a4c3-4ced8b823e83",
	1,
	'select any lm from instances of LockManager;
if(not_empty lm)
	self.id = lm.getUniqueLockId();
end if;
',
	1,
	'',
	"e65916ed-3080-4be1-9502-75ccd5e4cec5");
INSERT INTO S_DT_PROXY
	VALUES ("233e7f8d-a875-4812-a4c3-4ced8b823e83",
	"00000000-0000-0000-0000-000000000000",
	'void',
	'',
	'',
	'../../../../Datatypes/Datatypes.xtuml');
INSERT INTO O_TFR
	VALUES ("6bbe92af-0a36-438f-a73c-f646a961afab",
	"9f6bb5a3-482c-4083-b148-3f2d21230a4c",
	'getId',
	'',
	"5f77c811-d46b-4197-a574-4b3505e92410",
	1,
	'return self.id;',
	1,
	'',
	"7c3d18ef-f935-4ba0-a6ba-520e2419ae65");
INSERT INTO O_NBATTR
	VALUES ("9908d83d-93ad-40bd-9cbf-36f559ec87dd",
	"9f6bb5a3-482c-4083-b148-3f2d21230a4c");
INSERT INTO O_BATTR
	VALUES ("9908d83d-93ad-40bd-9cbf-36f559ec87dd",
	"9f6bb5a3-482c-4083-b148-3f2d21230a4c");
INSERT INTO O_ATTR
	VALUES ("9908d83d-93ad-40bd-9cbf-36f559ec87dd",
	"9f6bb5a3-482c-4083-b148-3f2d21230a4c",
	"00000000-0000-0000-0000-000000000000",
	'id',
	'',
	'',
	'id',
	0,
	"5f77c811-d46b-4197-a574-4b3505e92410",
	'',
	'');
INSERT INTO O_ID
	VALUES (0,
	"9f6bb5a3-482c-4083-b148-3f2d21230a4c");
INSERT INTO O_ID
	VALUES (1,
	"9f6bb5a3-482c-4083-b148-3f2d21230a4c");
INSERT INTO O_ID
	VALUES (2,
	"9f6bb5a3-482c-4083-b148-3f2d21230a4c");
INSERT INTO S_SS_PROXY
	VALUES ("f56566de-5321-4b5f-b659-95d5c01e1baa",
	'Backend',
	'',
	'',
	0,
	"02903c54-443d-4a88-aa81-181997e1d9f4",
	"00000000-0000-0000-0000-000000000000",
	'../Backend.xtuml');
